.TH "apt\&.conf" "5" "25 Oct 2000" "apt" "" 
.SH "NAME" 
apt\&.conf \- configuration file for APT
.PP 
.SH "DESCRIPTION" 
\fBapt\&.conf\fP is the main configuration file for the APT suite of
tools, all tools make use of the configuration file and a common command line
parser to provide a uniform environment\&. When an APT tool starts up it will
read \fB/etc/apt/apt\&.conf\fP, then read the configuration specified by the
\fB$APT_CONFIG\fP environment variable and then finally apply the command line
options to override the configuration directives, possibly loading more 
config files\&.
.PP 
The configuration file is organized in a tree with options organized into
functional groups\&. Option specification is given with a double colon
notation, for instance \fIAPT::Get::Assume-Yes\fP is an option within the
APT tool group, for the Get tool\&. Options do not inherit from their parent
groups\&.
.PP 
Syntacticly the configuration language is modeled after what the ISC tools
such as bind and dhcp use\&. Each line is of the form
.RS 
APT::Get::Assume-Yes "true";
.RE 
The trailing semicolon is required and
the quotes are optional\&. A new \fIscope\fP can be opened with curly braces,
like: 

.nf 
 
APT {
  Get {
    Assume-Yes "true";
    Fix-Broken "true";
  };
};

.fi 
 

with newlines placed to make
it more readable\&. Lists can be created by opening a scope an including a 
single word enclosed in quotes followed by a semicolon\&. 
In general the sample configuration file in
\fI/usr/doc/apt/examples/apt\&.conf\fP and
\fI/usr/doc/apt/examples/configure-index\fP 
(or \fI/usr/share/doc/apt*/examples/configure-index\fP in Conectiva)
is a good guide for how it should look\&.
.PP 
All of the APT tools take a -o option which allows an arbitary configuration 
directive to be specified on the command line\&. The syntax is a full option
name (APT::Get::Assume-Yes for instance) followed by an equals sign then the
new value of the option\&. Lists can be appended too by adding a trailing ::
to the list name\&.
.PP 
.SH "The APT Group" 
This group of options controls general APT behavoir as well as holding the
options for all of the tools\&.
.PP 
.IP "\fBArchitecture\fP" 
System Architecture; sets the architecture to use when fetching files and
parsing package lists\&. The internal default is the architecture apt was 
compiled for\&.
.IP 
.IP "\fBIgnore-Hold\fP" 
Ignore Held packages; This global options causes the problem resolver to
ignore held packages in its decision making\&. 
.IP 
.IP "\fBClean-Installed\fP" 
Defaults to on\&. When turned on the autoclean feature will remove any package
which can no longer be downloaded from the cache\&. If turned off then
packages that are locally installed are also excluded from cleaning - but
note that APT provides no direct means to reinstall them\&.
.IP 
.IP "\fBImmediate-Configure\fP" 
Disable Immedate Configuration; This dangerous option disables some
of APT\'s ordering code to cause it to make fewer dpkg calls\&. Doing
so may be necessary on some extremely slow single user systems but 
is very dangerous and may cause package install scripts to fail or worse\&.
Use at your own risk\&. This option does not have any effect on RPM based
systems\&.
.IP 
.IP "\fBForce-LoopBreak\fP" 
Never Enable this option unless you -really- know what you are doing\&. It
permits APT to temporarily remove an essential package to break a
Conflicts/Conflicts or Conflicts/Pre-Depend loop between two essential
packages\&. SUCH A LOOP SHOULD NEVER EXIST AND IS A GRAVE BUG\&. This option will
work if the essential packages are not tar, gzip, libc, dpkg, bash or 
anything that those packages depend on\&.
.IP 
.IP "\fBCache-Limit\fP" 
APT uses a fixed size memory mapped cache file to store the \'available\'
information\&. This sets the size of that cache\&.
.IP 
.IP "\fBGet\fP" 
The Get subsection controls the \fBapt-get(8)\fP tool, please see its
documentation for more information about the options here\&.
.IP 
.IP "\fBCache\fP" 
The Cache subsection controls the \fBapt-cache(8)\fP tool, please see its
documentation for more information about the options here\&.
.IP 
.IP "\fBCDROM\fP" 
The CDROM subsection controls the \fBapt-cdrom(8)\fP tool, please see its
documentation for more information about the options here\&.
.IP 
.PP 
.SH "The Acquire Group" 
The \fBAcquire\fP group of options controls the download of packages and the 
URI handlers\&. 
.PP 
.IP "\fBQueue-Mode\fP" 
Queuing mode; \fBQueue-Mode\fP can be one of \fBhost\fP or \fBaccess\fP which 
determins how APT parallelizes outgoing connections\&. \fBhost\fP means that
one connection per target host will be opened, \fBaccess\fP means that one
connection per URI type will be opened\&.
.IP 
.IP "\fBRetries\fP" 
Number of retries to perform\&. If this is non-zero apt will retry failed 
files the given number of times\&.
.IP 
.IP "\fBSource-Symlinks\fP" 
Use symlinks for source archives\&. If set to true then source archives will
be symlinked when possible instead of copying\&. True is the default
.IP 
.IP "\fBhttp\fP" 
HTTP URIs; http::Proxy is the default http proxy to use\&. It is in the standard
form of \fIhttp://[[user][:pass]@]host[:port]/\fP\&. Per host proxies can also
be specified by using the form http::Proxy::<host> with the special keyword
\fIDIRECT\fP meaning to use no proxies\&. The \fI$http_proxy\fP environment variable
will override all settings\&.
.IP 
Three settings are provided for cache control with HTTP/1\&.1 complient proxy
caches\&. \fBNo-Cache\fP tells the proxy to not used its cached response under
any circumstances, \fBMax-Age\fP is sent only for index files and tells the
cache to refresh its object if it is older than the given number of seconds\&. 
Debian updates its index files daily so the default is 1 day\&. \fBNo-Store\fP 
specifies that the cache should never store this request, it is only
set for archive files\&. This may be usefull to prevent polluting a proxy cache
with very large \&.deb files\&. Note: Squid 2\&.0\&.2 does not support any of
these options\&. 
.IP 
The option \fBtimeout\fP sets the timeout timer used by the method, this
applies to all things including connection timeout and data timeout\&.
.IP 
One setting is provided to control the pipeline depth in cases where the
remote server is not RFC conforming or buggy (such as Squid 2\&.0\&.2)
Acquire::http::Pipeline-Depth can be a value from 0 to 5 indicating how many
outstanding requests APT should send\&.
.IP 
.IP "\fBftp\fP" 
FTP URis; ftp::Proxy is the default proxy server to use\&. It is in the 
standard form of \fIftp://[[user][:pass]@]host[:port]/\fP and is overriden
by the ftp_proxy environment variable\&. To use a ftp proxy you will have to
set the ftp::ProxyLogin script in the configuration file\&. This entry 
specifies the commands to send to tell the proxy server what to connect
to\&. Please see \fI/usr/doc/apt/examples/configure-index\fP for an example of how 
to do this\&. The subsitution variables available are $(PROXY_USER),
$(PROXY_PASS), $(SITE_USER), $(SITE_PASS), $(SITE), and $(SITE_PORT)\&. 
Each is taken from it\'s respective URI component\&.
.IP 
The option \fBtimeout\fP sets the timeout timer used by the method, this
applies to all things including connection timeout and data timeout\&.
.IP 
Several settings are provided to control passive mode\&. Generally it is safe
to leave passive mode on, it works in nearly every environment\&. However some
situations require that passive mode be disabled and port mode ftp used
instead\&. This can be done globally, for connections that go through a proxy
or for a specific host (See the sample config file for examples)
.IP 
It is possible to proxy FTP over HTTP by setting the \fIftp_proxy\fP
environment variable to a http url - see the discussion of the http method
above for syntax\&. You cannot set this in the configuration file and it is
not recommended to use FTP over HTTP due to its low efficiency\&.
.IP 
.IP "\fBcdrom\fP" 
CDROM URIs; the only setting for CDROM URIs is the mount point, cdrom::Mount
which must be the mount point for the CDROM drive as specified in /etc/fstab\&.
It is possible to provide alternate mount and unmount commands if your
mount point cannot be listed in the fstab (such as an SMB mount)\&. The syntax
is to put "/cdrom/"::Mount "foo"; within the cdrom block\&. It is important to
have the trailing slash\&. Unmount commands can be specified using UMount\&.
.IP 
.PP 
.SH "Directories" 
The \fBDir::State\fP section has directories that pertain to local state
information\&. \fBlists\fP is the directory to place downloaded package lists
in and \fBstatus\fP is the name of the dpkg status file\&. \fBDir::State\fP
contains the default directory to prefix on all sub items if they do not
start with \fI/\fP or \fI\&./\fP\&. \fBxstatus\fP and \fBuserstatus\fP are for future
use\&.
.PP 
\fBDir::Cache\fP contains locations pertaining to local cache information, such
as the two package caches \fBsrcpkgcache\fP and \fBpkgcache\fP as well as the
location to place downloaded archives, \fBDir::Cache::archives\fP\&. Like 
\fBDir::State\fP the default directory is contained in \fBDir::Cache\fP
.PP 
\fBDir::Etc\fP contains the location of configuration files, \fBsourcelist\fP
gives the location of the sourcelist and \fBmain\fP is the default configuration
file (setting has no effect)
.PP 
Binary programs are pointed to by \fBDir::Bin\fP\&. \fBmethods\fP specifies the
location of the method handlers and \fBgzip\fP, \fBdpkg\fP, \fBrpm\fP, 
\fBapt-get\fP, \fBdpkg-source\fP, \fBdpkg-buildpackage\fP and
\fBapt-cache\fP specify the location of the respective programs\&.
.PP 
.SH "APT in DSelect" 
When APT is used as a \fBdselect(8)\fP method several configuration directives
control the default behavoir\&. These are in the \fBDSelect\fP section\&.
.PP 
.IP "\fBClean\fP" 
Cache Clean mode; this value may be one of always, auto, prompt and never\&.
always will remove all archives after they have been downloaded while auto
will only remove things that are no longer downloadable (replaced with a new
version for instance)
.IP 
.IP "\fBOptions\fP" 
The contents of this variable is passed to \fBapt-get(8)\fP as command line
options when it is run for the install phase\&.
.IP 
.IP "\fBUpdateOptions\fP" 
The contents of this variable is passed to \fBapt-get(8)\fP as command line
options when it is run for the update phase\&.
.IP 
.IP "\fBPromptAfterUpdate\fP" 
If true the [U]pdate operation in dselect will always prompt to continue\&. 
The default is to prompt only on error\&.
.PP 
.SH "How APT calls DPkg" 
Several configuration directives control how APT invokes dpkg\&. These are in 
the \fBDPkg\fP section\&.
.PP 
.IP "\fBOptions\fP" 
This is a list of options to pass to dpkg\&. The options must be specified
using the list notation and each list item is passed as a single arugment
to dpkg\&.
.IP 
.IP "\fBPre-Invoke\fP, \fBPost-Invoke\fP" 
This is a list of shell commands to run before/after invoking dpkg\&. Like 
\fBOptions\fP this must be specified in list notation\&. The commands
are invoked in order using /bin/sh, should any fail APT will abort\&.
.IP 
.IP "\fBPre-Install-Pkgs\fP" 
This is a list of shell commands to run before invoking dpkg\&. Like
\fBOptions\fP this must be specified in list notation\&. The commands
are invoked in order using /bin/sh, should any fail APT will abort\&.
Apt will pass to the commands on standard input the filenames of all
\&.deb files it is going to install, one per line\&.
.IP 
.IP "\fBRun-Directory\fP" 
APT chdirs to this directory before invoking dpkg, the default is /\&.
.IP 
.IP "\fBBuild-Options\fP" 
These options are passed to dpkg-buildpackage when compiling packages,
the default is to disable signing and produce all binaries\&.
.IP 
.PP 
.SH "Debug Options" 
Most of the options in the \fBdebug\fP section are not interesting to the
normal user, however \fBDebug::pkgProblemResolver\fP shows interesting
output about the decisions dist-upgrade makes\&. \fBDebug::NoLocking\fP
disables file locking so apt can do some operations as non-root and
\fBDebug::pkgDPkgPM\fP (or \fBDebug::pkgRPMPM\fP) will print out the 
command line for each dpkg invokation\&. \fBDebug::IdentCdrom\fP will 
disable the inclusion of statfs data in CDROM IDs\&.
.PP 
.SH "EXAMPLES" 
\fB/usr/doc/apt/examples/configure-index\&.gz\fP or
\fB/usr/share/doc/apt*/configure-index\fP 
contains a sample configuration 
file showing the default values for all possible options\&.
.PP 
.SH "FILES" 
/etc/apt/apt\&.conf
.PP 
.SH "SEE ALSO" 
apt-cache (8),
apt-get (8)
.PP 
.SH "BUGS" 
See http://bugs\&.debian\&.org/apt\&.  If you wish to report a
bug in \fBapt-get\fP, please see \fB/usr/doc/debian/bug-reporting\&.txt\fP
or the \fBbug(1)\fP command\&.  If you are using apt on a RPM based
system, please use http://distro\&.conectiva\&.com\&.br/bugzilla/\&.
.PP 
.SH "AUTHOR" 
apt-get was written by the APT team <apt@packages\&.debian\&.org>
and ported to RPM based systems by 
Alfredo K. Kojima, Conectiva S.A. <kojima@conectiva\&.com\&.br>\&.

